<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Caesar Cipher</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20width%3D'48'%20height%3D'48'%20viewBox%3D'0%200%2016%2016'%3E%3Ctext%20x%3D'0'%20y%3D'14'%3E%F0%9F%94%90%3C%2Ftext%3E%3C%2Fsvg%3E" />

<link rel="stylesheet" href="cipher.css">
</head>
<body>
<h1>Caesar Cipher Decoder</h1>

<h2>Plaintext</h2>
<textarea type="text" id="plaintext" placeholder="type or paste something here…"></textarea>  
<h2>Ciphertext</h2>
<textarea name="ciphertext" id="ciphertext" placeholder="Encoded text will appear here…"></textarea>
<h2>Decoded text</h2>
<textarea name="decodedtext" id="decodedtext" placeholder="Decrypted text will appear here."></textarea>

<script type="module">
import {
  caesarCipherDecode,
  statisticalCaesarCipherDecode,
  caesarCipherEncode
} from './caesar-cipher.js'


document.querySelector('#plaintext').addEventListener('input', () => {
  let randomShift = Math.floor(Math.random() * 26)
  let plaintext = document.querySelector('#plaintext').value
  document.querySelector('#ciphertext').value = caesarCipherEncode(plaintext, randomShift)
  let decrypted = statisticalCaesarCipherDecode(document.querySelector('#ciphertext').value)
  let decodedText = decrypted.decodedText
  document.querySelector('#decodedtext').value = decodedText
  
    document.querySelector('#decodedtext').classList.toggle('correct', decodedText == plaintext)
    document.querySelector('#decodedtext').classList.toggle('incorrect', decodedText !== plaintext)
  
})

</script>
</body>
</html>